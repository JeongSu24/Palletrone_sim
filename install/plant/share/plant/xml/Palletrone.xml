<mujoco model="Palletrone">
  <compiler angle="radian" coordinate="local" inertiafromgeom="auto"/>
  <option timestep="0.002" gravity="0 0 -9.81"/>

  <default>
    <geom friction="0.8 0.1 0.1" density="280"/>
    <joint type="hinge" damping="0.1" stiffness="0"/>
  </default>

  <asset>
  <mesh name="drone_body_mesh" file="BODY.stl"/>
  <mesh name="drone_servo_prop_mesh" file="PROP.stl"/>
  </asset>

  <worldbody>
    <body name="drone_base" pos="0 0 0.145">
      <freejoint name="drone_root"/>
      <inertial pos="0 0 0" quat="1 0 0 0" mass="4.0" diaginertia="0.360091 0.360702 0.660702"/>
      <geom name="drone_base_vis" type="mesh" mesh="drone_body_mesh" rgba="0.75 0.77 0.82 1" contype="1" conaffinity="1"/>
      <site name="drone_imu" pos="0 0 0" quat="1 0 0 0"/>
      <body name="drone_servo1" pos="0.148492 0.148492 0.145" quat="0.9238795 0 0 0.3826834">
        <joint name="drone_j_servo1" type="hinge" axis="1 0 0" pos="0 0 -0.075" range="-0.51 0.51" damping="0.1"/>
        <body name="drone_prop1_body" pos="0 0 -0.075">
          <geom name="drone_servo1_vis" type="mesh" mesh="drone_servo_prop_mesh" mass="0.2" quat="0.7071068 0 0 0.7071068" rgba="0.85 0.85 0.0 1" contype="0" conaffinity="0"/>
          <site name="drone_prop1_site" pos="0 0 0" size="0.004" type="sphere"/>
        </body>
      </body>
      <body name="drone_servo2" pos="-0.148492 0.148492 0.145" quat="0.3826834 0 0 0.9238795">
        <joint name="drone_j_servo2" type="hinge" axis="1 0 0" pos="0 0 -0.075" range="-0.51 0.51" damping="0.1"/>
        <body name="drone_prop2_body" pos="0 0 -0.075">
          <geom name="drone_servo2_vis" type="mesh" mesh="drone_servo_prop_mesh" mass="0.2" quat="0.7071068 0 0 0.7071068" rgba="0.85 0.85 0.0 1" contype="0" conaffinity="0"/>
          <site name="drone_prop2_site" pos="0 0 0" size="0.004" type="sphere"/>
        </body>
      </body>
      <body name="drone_servo3" pos="-0.148492 -0.148492 0.145" quat="0.3826834 0 0 -0.9238795">
        <joint name="drone_j_servo3" type="hinge" axis="1 0 0" pos="0 0 -0.075" range="-0.51 0.51" damping="0.1"/>
        <body name="drone_prop3_body" pos="0 0 -0.075">
          <geom name="drone_servo3_vis" type="mesh" mesh="drone_servo_prop_mesh" mass="0.2" quat="0.7071068 0 0 0.7071068" rgba="0.85 0.85 0.0 1" contype="0" conaffinity="0"/>
          <site name="drone_prop3_site" pos="0 0 0" size="0.004" type="sphere"/>
        </body>
      </body>
      <body name="drone_servo4" pos="0.148492 -0.148492 0.145" quat="0.9238795 0 0 -0.3826834">
        <joint name="drone_j_servo4" type="hinge" axis="1 0 0" pos="0 0 -0.075" range="-0.51 0.51" damping="0.1"/>
        <body name="drone_prop4_body" pos="0 0 -0.075">
          <geom name="drone_servo4_vis" type="mesh" mesh="drone_servo_prop_mesh" mass="0.2" quat="0.7071068 0 0 0.7071068" rgba="0.85 0.85 0.0 1" contype="0" conaffinity="0"/>
          <site name="drone_prop4_site" pos="0 0 0" size="0.004" type="sphere"/>
        </body>
      </body>
      <body name="base" pos="0.32 0.32 0.13" euler="0 0 -2.355">
        <geom name="joint1_geom" type="cylinder" fromto="0 0 0  0 0 0.1" size="0.03" mass="0.082" rgba="0 1 0 0.6"/>
        <joint name="joint1" axis="0 0 1" limited="true" range="-1.57 1.57"/>
        <geom name="link1_capsule" type="capsule" fromto="0 0 0.1  0 0 0.15" size="0.01" density="280" rgba="0.9 0.8 0.1 1"/>
        <body name="link2" pos="0 0 0.15">
          <geom name="joint2_geom" type="cylinder" fromto="0 -0.05 0  0 0.05 0" size="0.03" mass="0.165" rgba="0 1 0 0.6"/>
          <joint name="joint2" axis="0 1 0" limited="true" range="-1.57 1.57"/>
          <geom name="link2_capsule" type="capsule" fromto="0 0 0  0 0 0.68" size="0.01" density="280" rgba="0.9 0.8 0.1 1"/>
          <body name="link3" pos="0 0 0.68">
            <geom name="joint3_geom" type="cylinder" fromto="0 -0.05 0  0 0.05 0" size="0.03" mass="0.082" rgba="0 1 0 0.6"/>
            <joint name="joint3" axis="0 1 0" limited="true" range="-1.57 1.57"/>
            <geom name="link3_capsule" type="capsule" fromto="0 0 0  0 0 0.68" size="0.01" density="280" rgba="0.9 0.8 0.1 1"/>
            <geom name="End-effector" type="sphere" pos="0 0 0.68" size="0.04" mass="0.5" rgba="0.2 0.2 1 1"/>
            <body name="link4" pos="0 0 0.55">
              <geom name="link4_capsule" type="capsule" fromto="0 -0.2 0  0 0.2 0" size="0.01" density="280" rgba="0.9 0.8 0.1 1"/>
              <body name="thruster_left_body" pos="0 0.2 0">
                <geom name="thruster_left" type="cylinder" fromto="0 -0.05 0  0 0.05 0" size="0.03" mass="0.050" rgba="0 1 0 0.6"/>
                <joint name="joint5_left" axis="0 1 0" limited="true" range="-1.57 1.57"/>
                <body name="prop_left_body" pos="0.05 0 0">
                  <geom name="prop_left_geom" type="cylinder" fromto="0 0 0  0.02 0 0" size="0.03" rgba="1 0 0 1"/>
                  <site name="prop_left_site" pos="0.05 0 0" size="0.01" rgba="1 1 0 1"/>
                </body>
              </body>
              <body name="thruster_right_body" pos="0 -0.2 0">
                <geom name="thruster_right" type="cylinder" fromto="0 -0.05 0  0 0.05 0" size="0.03" mass="0.050" rgba="0 1 0 0.6"/>
                <joint name="joint5_right" axis="0 1 0" limited="true" range="-1.57 1.57"/>
                <body name="prop_right_body" pos="0.05 0 0">
                  <geom name="prop_right_geom" type="cylinder" fromto="0 0 0  0.02 0 0" size="0.03" rgba="1 0 0 1"/>
                  <site name="prop_right_site" pos="0.05 0 0" size="0.01" rgba="1 1 0 1"/>
                </body>
              </body>
            </body>
          </body>
        </body>
      </body>
    </body>
  </worldbody>
  <!--5. Contact-->
  <contact>
    <exclude body1="link3" body2="link4"/>
    <exclude body1="link4" body2="thruster_left_body"/>
    <exclude body1="link4" body2="thruster_right_body"/>
  </contact>
  <!-- 6. Actuator  -->
  <actuator>
    <position name="pos_joint1" joint="joint1" kp="10.0" kv="0.2" ctrllimited="true" ctrlrange="-1.57 1.57" forcelimited="true" forcerange="-4.1 4.1"/>
    <position name="pos_joint2" joint="joint2" kp="60.0" kv="0.3" ctrllimited="true" ctrlrange="-1.57 1.57" forcelimited="true" forcerange="-10.6 10.6"/>
    <position name="pos_joint3" joint="joint3" kp="60.0" kv="0.2" ctrllimited="true" ctrlrange="-1.57 1.57" forcelimited="true" forcerange="-4.1 4.1"/>
    <position name="pos_joint5_L" joint="joint5_left" kp="3.0" kv="0.05" ctrllimited="true" ctrlrange="-1.57 1.57" forcelimited="true" forcerange="-0.9 0.9"/>
    <position name="pos_joint5_R" joint="joint5_right" kp="3.0" kv="0.05" ctrllimited="true" ctrlrange="-1.57 1.57" forcelimited="true" forcerange="-0.9 0.9"/>
    <motor name="thruster_left" site="prop_left_site" gear="1 0 0 0 0 0" ctrllimited="true" ctrlrange="0 15"/>
    <motor name="thruster_right" site="prop_right_site" gear="1 0 0 0 0 0" ctrllimited="true" ctrlrange="0 15"/>
    <general name="drone_BLDC1" site="drone_prop1_site" gear="0 0 1 0 0  0.02" ctrlrange="0 50"/>
    <general name="drone_BLDC2" site="drone_prop2_site" gear="0 0 1 0 0 -0.02" ctrlrange="0 50"/>
    <general name="drone_BLDC3" site="drone_prop3_site" gear="0 0 1 0 0  0.02" ctrlrange="0 50"/>
    <general name="drone_BLDC4" site="drone_prop4_site" gear="0 0 1 0 0 -0.02" ctrlrange="0 50"/>
    <position name="drone_servo1_pos" joint="drone_j_servo1" kp="50" kv="0.02" ctrlrange="-0.51 0.51"/>
    <position name="drone_servo2_pos" joint="drone_j_servo2" kp="50" kv="0.02" ctrlrange="-0.51 0.51"/>
    <position name="drone_servo3_pos" joint="drone_j_servo3" kp="50" kv="0.02" ctrlrange="-0.51 0.51"/>
    <position name="drone_servo4_pos" joint="drone_j_servo4" kp="50" kv="0.02" ctrlrange="-0.51 0.51"/>
  </actuator>
  <!-- 7. Sensor  -->
  <sensor>
    <jointpos name="q1_sensor" joint="joint1"/>
    <jointpos name="q2_sensor" joint="joint2"/>
    <jointpos name="q3_sensor" joint="joint3"/>
    <jointpos name="q5_L_sensor" joint="joint5_left"/>
    <jointpos name="q5_R_sensor" joint="joint5_right"/>
    <framequat name="link3_quat" objtype="body" objname="link3"/>
    <framequat name="link4_quat" objtype="body" objname="link4"/>
    <framequat name="drone_body_quat" objtype="site" objname="drone_imu"/>
    <gyro name="drone_body_gyro" site="drone_imu"/>
    <framepos name="drone_base_pos" objtype="body" objname="drone_base"/>
    <framelinvel name="drone_base_linvel" objtype="body" objname="drone_base"/>
    <jointpos name="drone_servo1_angle" joint="drone_j_servo1"/>
    <jointpos name="drone_servo2_angle" joint="drone_j_servo2"/>
    <jointpos name="drone_servo3_angle" joint="drone_j_servo3"/>
    <jointpos name="drone_servo4_angle" joint="drone_j_servo4"/>
  </sensor>
</mujoco>

